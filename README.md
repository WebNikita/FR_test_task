# Документация к API

### Важные моменты:

Так как не делал регистрацию, для отладки работы API добавлены следующие параметры в маршрут:

```python
<int:type_of_user>
```

По сути это выбор от кого будет идти запрос:

0 - Пользователь

1- Админ

Так же добавлен параметр:

```python
<int:user_id>
```

По сути это имитация авторизированого ползователя, указываем id и радуемся)

## Основные маршруты

### Маршрут для получения информации об опросах

```python
/api/v1/<int:type_of_user>/surveys/
```

При запросе от Админа получим вообще все опросы которые существуют

```python
[
    {
        "id": индентификатор опроса
        "questions": перечень вопросов
				[
            {
                "id": индентификатор вопроса
                "question": сам вопрос
                "answers": выбор ответов(если выбора нет то NULL)
                "question_type": тип вопроса
                "survey": индентификатор опроса
            }
        ],
        "name": название опроса
        "date_start": дата создания
        "date_end": дата окончания
        "description": описания опроса
    }
]
```

Пример при выполнении от админа

```python
[
    {
        "id": 1,
        "questions": [
            {
                "id": 1,
                "question": "Как у вас дела?",
                "answers": null,
                "question_type": "Text",
                "survey": 1
            },
            {
                "id": 2,
                "question": "Сколько вам лет?",
                "answers": "12,13,14,15",
                "question_type": "Many_answers",
                "survey": 1
            },
            {
                "id": 3,
                "question": "Какая у вас машина",
                "answers": "Toyota,Audi,Ford",
                "question_type": "One_answer",
                "survey": 1
            }
        ],
        "name": "Робототехника",
        "date_start": "2022-01-11",
        "date_end": "2022-01-11",
        "description": "Просто по приколу"
    }
]
```

Пример выполенния от пользователя

А будет тоже самое, так как опрос заканчивается сегодня) Но если поменять дату окончания увидим вот что: 

```python
[]
```

Ну и если опрос ещё не начался: 

```python
[]
```

### Маршрут для редактирования опроса

```python
/api/v1/<int:type_of_user>/surveys/edit/
```

При запросе от пользователя получим ошибку) 

Запрос → POST

```python
{
"id": индентификатор
"name": название
"date_end": дата окончания
"description": описание
}
```

Пример запроса

```python
{
"id": 1,
"name": "IT клёво",
"date_end": "2022-01-11",
"description": "Описание"
}
```

Ну и если всё верно сделано получим код 201, можно было сделать ответ json ом но решил что не буду городить

### Маршрут для удаления опроса

```python
/api/v1/<int:type_of_user>/surveys/del/<int:pk>
<int:pk> -> Индентификатор опроса
```

Просто удаляет опрос

При запросе от пользователя получим ошибку) 

Пример:

```python
/api/v1/1/surveys/del/1
```

Получим 201 при успехе

### Маршрут для создания опроса

```python
/api/v1/<int:type_of_user>/surveys/add/
```

При запросе от пользователя получим ошибку) 

Запрос → POST

```python
{
"name": название
"date_start": дата начала
"date_end": дата окончания
"description": описание
}
```

Пример запроса

```python
{
"name": "IT клёво",
"date_end": "2022-01-11",
"date_end": "2022-01-11",
"description": "Описание"
}
```

Ну и если всё верно сделано получим код 201

### Маршрут для создания вопроса

```python
/api/v1/<int:type_of_user>/questions/add/
```

При запросе от пользователя получим ошибку) 

Запрос → POST

```python
{
"survey": индетификатор опроса к которому привядется вопроса
"question": сам вопрос
"answers": ответы
"question_type": тип ответа
}
```

Типы вопросов:

Сепаратор → ,

```python
Text - Ответ текстом
One_answer - Выбор одного ответа
Many_answers - Выбор нескольких ответов
```

Пример запроса:

```python
{
"survey": 1,
"question": "Как дела",
"question_type": "Text"
}
```

### Маршрут для редактирования вопроса

```python
/api/v1/<int:type_of_user>/questions/edit/
```

При запросе от пользователя получим ошибку) 

Запрос → POST

```python
{
"id": индентификатор вопроса
"survey": индетификатор опроса к которому привяжется вопроса
"question": сам вопрос
"answers": ответы
"question_type": тип ответа
}
```

Типы вопросов:

Сепаратор → ,

```python
Text - Ответ текстом
One_answer - Выбор одного ответа
Many_answers - Выбор нескольких ответов
```

Пример запроса

```python
{
"id": 1,
"survey": 1,
"question": "Как у вас дела?",
"answers": "Хорошо,Плохо",
"question_type": "One_answer"
}
```

Ну и если всё верно сделано получим код 201

### Маршрут для удаления вопроса

```python
/api/v1/<int:type_of_user>/questions/del/<int:pk>
<int:pk> -> Индентификатор вопроса
```

Просто удаляет вопрос

При запросе от пользователя получим ошибку) 

Пример:

```python
/api/v1/1/questions/del/1
```

Получим 201 при успехе

### Маршрут для создания ответа на вопрос

```python
/api/v1/<int:type_of_user>/answers/add/
```

При запросе от пользователя получим ошибку) 

Запрос → POST

```python
{
"user_id": индентификатор пользователя
"surveys": индентификатор опроса
"question": индентификатор вопроса
"answer": ответ
}
```

Пример:

Сепаратор → ,

```python
{
"user_id": 1,
"surveys": 1,
"question": 1,
"answer": "Клёво"
}
```

Если вопроса с выбором нескольких ответов

```python
{
"user_id": 1,
"surveys": 1,
"question": 1,
"answer": "Клёво,сойдёт"
}
```

## Основные маршруты

### Маршрут для получения информации о вопросе

```python
<int:type_of_user>/answers/show/<int:user_id>/<int:surveys_id>
<int:user_id> -> индентификатор пользователя
<int:surveys_id> -> индентификатор опроса
```

При запросе получим 

```python
[
    {
        "id": 2,
        "user_id": 1,
        "answer": "Ну такое себе",
        "surveys": 1,
        "question": 1
    },
    {
        "id": 3,
        "user_id": 1,
        "answer": "ggw",
        "surveys": 1,
        "question": 1
    }
]
```